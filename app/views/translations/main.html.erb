<%= render "shared/navbar" %>

<main>
        <section id="map">
            
        <%= form_with url: translations_path, method: :post, local: true, data: { turbo: false } do |form| %>
          <div>
            <%= form.text_area :text, rows: 3, placeholder: "Enter your word...", value: session[:last_searched_word].presence || "" %>
          </div>
        
          <div>
            <%= form.select :source_lang, 
                  options_for_select(
                    TranslationsController::LANGUAGE_NAMES.map { |key, value| [value, key] },
                    session[:last_searched_lang] || params[:source_lang]
                  ),
                  { prompt: session[:last_searched_lang].present? ? nil : "Choose language" } %>
          </div>
        
          <div>
            <%= form.submit "Translate" %>
          </div>
        <% end %>
        <% flash.each do |key, message| %>
          <%= message %>
        <% end %>

        <% if @word_data.present? %>
  <h2>Etymology:</h2>
  <p><%= @word_data[:etymology].presence || "No etymology found." %></p>

  <h2>Meaning:</h2>
  <p><%= @word_data[:verb_section].presence || "No meaning found." %></p>
  
  <h2>Synonyms:</h2>
  <p><%= @translated_synonyms&.join(", ").presence || "No synonyms found." %></p>
  <% else %>
            <div id="info" class="search-info">
                <div class="text">
                    <h1>Enter a word to discover its origins, meanings, synonyms, and how it connects with other languages around the world.</h1>
                    <h2>Tips for Better Results:</h2>
                    <ul>
                        <li>If you don’t get a suitable response, try changing the case of the first letter (e.g., 'Apple' vs. 'apple')</li>
                        <li>Use singular forms for nouns and base forms for verbs for better accuracy.</li>
                        <li>Use the language dropdown to refine your search.</li>
                        <li>Avoid adding punctuation or extra characters when searching for a word.</li>
                        <li>Try searching for common synonyms if your word doesn't yield results.</li>
                    </ul>
                </div>
                
            </div>
            <% end%>

            <div id="translation" class="search-info">
                <div class="text">
                    <h1>The map highlights similarities between the word you searched and its counterparts in other European languages</h1>
                    <h2>How to Read the Map</h2>
                    <ul>
                        <li>Color Key:<br/>
                            <strong>Green:</strong> The word is almost identical in the highlighted language.<br/>
                            <strong>Yellow:</strong> The word is moderately similar (about 50-70%). Orange: The word shares slight similarities (below 50%).<br/>
                            <strong>Red:</strong> The word is not similar at all.</li>
                        <li>In this section, you’ll find a detailed list sorted by language families (e.g., Romance, Germanic, Slavic).</li>
                    </ul>
                </div>
            </div>
        
            <div id="save" class="search-info">
                <div class="text">
                    <h1>Log into your account and save words!</h1>
                    <p><a href="login.html" class="link-login">Login</a> or <a href="signin.html" class="link-login">register</a> here</p>
                </div>
            </div>
        </section>
    </main>

<%= render "shared/footer" %>





